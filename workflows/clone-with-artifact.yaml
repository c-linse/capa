apiVersion: argoproj.io/v1alpha1
kind: Workflow
metadata:
  generateName: git-clone-
  namespace: argo
spec:
  entrypoint: git-clone
  templates:
    - name: git-clone
      steps:
      - - name: hello1
          template: git-clone-tmpl
      - - name: hello2
          template: git-clone-ls-tmpl
          arguments:
            artifacts:
              # bind message to the hello-art artifact
              # generated by the generate-artifact step
              - name: code
                from: "{{steps.hello1.outputs.artifacts.code-artifact}}"

    - name: git-clone-tmpl
      container:
        image: bitnami/git
        command: [ git, clone]
        args: [ "https://github.com/c-linse/go-add-app" ]
      outputs:
        artifacts:
          # generate hello-art artifact from /tmp/hello_world.txt
          # artifacts can be directories as well as files
          - name: code-artifact
            path: ./go-add-app

    - name: git-clone-ls-tmpl
      inputs:
        artifacts:
          # unpack the message input artifact
          # and put it at /tmp/message
          - name: code
            path: ./go-add-app
      container:
        image: bitnami/git
        command: [ ls ]
